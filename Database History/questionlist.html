<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dark Animated Questions Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
/* ---------------- Global ---------------- */
* {margin:0;padding:0;box-sizing:border-box;}
body {
  font-family: 'Montserrat', sans-serif;
  min-height:100vh;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  background-size: 600% 600%;
  animation: gradientBG 20s ease infinite;
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
  overflow-x:hidden;
}

/* ---------------- Floating Circles ---------------- */
.circle {
  position:absolute;
  border-radius:50%;
  background: rgba(255,255,255,0.05);
  animation: float 15s linear infinite;
  z-index:0;
}
.circle:nth-child(1){ width:120px;height:120px; top:50px; left:30px; animation-delay:0s; }
.circle:nth-child(2){ width:80px;height:80px; top:200px; right:50px; animation-delay:3s; }
.circle:nth-child(3){ width:150px;height:150px; bottom:50px; left:150px; animation-delay:6s; }
.circle:nth-child(4){ width:60px;height:60px; bottom:100px; right:120px; animation-delay:9s; }

@keyframes float {
  0% {transform: translateY(0) translateX(0);}
  25% {transform: translateY(-20px) translateX(15px);}
  50% {transform: translateY(-40px) translateX(0);}
  75% {transform: translateY(-20px) translateX(-15px);}
  100% {transform: translateY(0) translateX(0);}
}
@keyframes gradientBG {
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

/* ---------------- Navigation Buttons ---------------- */
.nav-buttons {
  display:flex;
  gap:15px;
  margin-bottom:30px;
  flex-wrap:wrap;
  justify-content:center;
  z-index:1;
}
.nav-buttons button {
  background: #ff6f61;
  border:none;
  padding:12px 28px;
  font-size:1em;
  border-radius:50px;
  cursor:pointer;
  font-weight:bold;
  color:#fff;
  transition:all 0.4s ease;
  position:relative;
  overflow:hidden;
  box-shadow:0 6px 15px rgba(0,0,0,0.3);
}
.nav-buttons button::after {
  content:'';
  position:absolute;
  width:100%;
  height:100%;
  top:0; left:-100%;
  background: rgba(255,255,255,0.1);
  transform: skewX(-20deg);
  transition:all 0.5s ease;
}
.nav-buttons button:hover::after { left:200%; }
.nav-buttons button:hover { transform: scale(1.1) rotateZ(1deg); box-shadow: 0 0 25px rgba(255,111,97,0.6); }

/* ---------------- Header ---------------- */
h1 {
  text-align:center;
  font-size:2.5em;
  margin-bottom:20px;
  animation: fadeInDown 1s ease forwards;
  text-shadow: 0 0 10px #ffd700;
}
@keyframes fadeInDown {
  0% {opacity:0; transform: translateY(-50px);}
  100% {opacity:1; transform: translateY(0);}
}

/* ---------------- Filters ---------------- */
.filters {
  display:flex;
  gap:15px;
  margin-bottom:20px;
  flex-wrap:wrap;
  justify-content:center;
}
.filters select {
  padding:8px 15px;
  border-radius:10px;
  border:none;
  background: rgba(255,255,255,0.05);
  color:#fff;
  cursor:pointer;
  font-size:1em;
}
.filters select option { color:#000; }

/* ---------------- Stats / Questions Container ---------------- */
.stats-container {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:20px;
  max-width:1000px;
  position:relative;
  z-index:1;
}

/* ---------------- Question Cards ---------------- */
.stat-card {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
  border-radius:20px;
  padding:25px 35px;
  min-width:220px;
  text-align:center;
  box-shadow:0 8px 30px rgba(0,0,0,0.5);
  transition:transform 0.5s ease, box-shadow 0.5s ease;
  position:relative;
  overflow:hidden;
  cursor:pointer;
  opacity:0;
  animation: fadeInUp 0.6s forwards;
}
.stat-card:nth-child(1){ animation-delay:0.2s; }
.stat-card:nth-child(2){ animation-delay:0.4s; }
.stat-card:nth-child(3){ animation-delay:0.6s; }
.stat-card:nth-child(4){ animation-delay:0.8s; }
.stat-card:hover {
  transform: translateY(-10px) scale(1.05) rotateZ(1deg);
  box-shadow: 0 15px 35px rgba(255,255,255,0.5);
}
.stat-card h2 { font-size:1.3em; margin-bottom:10px; color:#ffd700; text-shadow:0 0 8px #ffd700; }
.stat-card p { font-size:1.1em; color:#fff; }

/* ---------------- Loader ---------------- */
.loader {
  text-align:center;
  font-size:1.2em;
  margin:30px 0;
  color:#ffd700;
  position:relative;
  display:inline-block;
  width:60px;
  height:60px;
}
.loader:before, .loader:after {
  content:"";
  position:absolute;
  top:0; left:0;
  width:60px; height:60px;
  border-radius:50%;
  border:5px solid transparent;
  border-top-color:#ffd700;
  animation: spin 1s linear infinite;
}
.loader:after {
  border:5px solid transparent;
  border-bottom-color:#ff6f61;
  animation-delay:0.5s;
}
@keyframes spin { 0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }
@keyframes fadeInUp {0%{opacity:0; transform:translateY(50px);}100%{opacity:1; transform:translateY(0);}}

@media(max-width:768px){
  .stats-container {flex-direction:column; align-items:center;}
  .stat-card {min-width:80%; padding:20px;}
  .filters {flex-direction:column; gap:10px;}
}
</style>
</head>
<body>

<!-- Floating Circles -->
<div class="circle"></div>
<div class="circle"></div>
<div class="circle"></div>
<div class="circle"></div>

<!-- Navigation Buttons -->
<div class="nav-buttons">
  <button onclick="location.href='index.html'">Home</button>
  <button onclick="location.href='questions.html'">Questions</button>
  <button onclick="location.href='answer.html'">Answering</button>
  <button onclick="location.href='https://johnathanfermon.github.io/SImpleProfile/previews/JSCSSHTML.html'">Contact Me</button>
</div>

<h1>Questions Dashboard</h1>

<!-- Filters -->
<div class="filters">
  <select id="categoryFilter">
    <option value="">All Categories</option>
    <option value="Health">Health</option>
    <option value="Tech">Tech</option>
    <option value="Life">Life</option>
  </select>
  <select id="emotionalFilter">
    <option value="">All Values</option>
    <option value="1">1-3</option>
    <option value="2">4-6</option>
    <option value="3">7-10</option>
  </select>
</div>

<!-- Container for Questions -->
<div class="stats-container" id="questionsContainer">
  <div id="loader" class="loader"></div>
</div>

<script>
// ---------------- Fetch Questions ----------------
let allQuestions = [];

async function fetchQuestions() {
  const container = document.getElementById('questionsContainer');
  container.innerHTML = '<div id="loader" class="loader"></div>';

  try {
    const res = await fetch('http://localhost:5000/api/questions');
    if(!res.ok) throw new Error('Network error');
    allQuestions = await res.json();
    displayQuestions(allQuestions);
  } catch(err){
    container.innerHTML = '<p style="color:red;">Failed to load questions</p>';
    console.error(err);
  }
}

// ---------------- Display Questions ----------------
function displayQuestions(questions){
  const container = document.getElementById('questionsContainer');
  container.innerHTML = '';

  if(questions.length===0){
    container.innerHTML = '<p>No questions found</p>';
    return;
  }

  questions.forEach(q=>{
    const card = document.createElement('div');
    card.className = 'stat-card';
    card.innerHTML = `
      <h2>Q#${q.q_id}</h2>
      <p>${q.question_text}</p>
      <small>Category: ${q.category||'N/A'} | Emotional Value: ${q.emotional_value||'N/A'}</small>
    `;
    container.appendChild(card);
  });
}

// ---------------- Filter Logic ----------------
document.getElementById('categoryFilter').addEventListener('change', filterQuestions);
document.getElementById('emotionalFilter').addEventListener('change', filterQuestions);

function filterQuestions(){
  const cat = document.getElementById('categoryFilter').value;
  const emo = document.getElementById('emotionalFilter').value;

  let filtered = allQuestions;

  if(cat) filtered = filtered.filter(q => q.category === cat);
  if(emo){
    if(emo==='1') filtered = filtered.filter(q=>q.emotional_value>=1 && q.emotional_value<=3);
    if(emo==='2') filtered = filtered.filter(q=>q.emotional_value>=4 && q.emotional_value<=6);
    if(emo==='3') filtered = filtered.filter(q=>q.emotional_value>=7 && q.emotional_value<=10);
  }

  displayQuestions(filtered);
}

fetchQuestions();
</script>

</body>
</html>
